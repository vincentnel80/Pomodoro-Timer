function setTime(){var e=[].slice.call(buttons);e.map(function(e){e.addEventListener("click",function(e){var n=e.target.dataset.workBtn,s=e.target.dataset.breakBtn,o=parseInt(workMinutes.textContent),i=parseInt(breakMinutes.textContent),t="";clearInterval(countTime),clockSession.innerHTML="Work",seconds=60,"-"==n&&o>5?(workSession=o-5,5==workSession&&(t="You should work at least 5 minutes!",showMessage(settingsMessage,t),setTimeout(hideMessage,3e3,settingsMessage)),displayTime(workSession,0),workMinutes.innerHTML=workSession+"m"):"+"==n&&o<60?(workSession=o+5,displayTime(workSession,0),workMinutes.innerHTML=workSession+"m"):"-"==s&&i>1?(breakSession=i-1,1==breakSession&&(t="You should rest for at least 1 minute!",showMessage(settingsMessage,t),setTimeout(hideMessage,3e3,settingsMessage)),breakMinutes.innerHTML=breakSession+"m"):"+"==s&&i<30&&(breakSession=i+1,breakMinutes.innerHTML=breakSession+"m")})})}function displayRunningTime(e,n,s){n<10?(n=zero+e,clockTime.innerHTML=[n,s].join(":")):s<10?(s=zero+seconds,clockTime.innerHTML=[n,s].join(":")):clockTime.innerHTML=[n,s].join(":")}function displayTime(e,n){e<10?(e=zero+e,n<10?(n=zero+n,clockTime.innerHTML=[e,n].join(":")):clockTime.innerHTML=[e,n].join(":")):n<10?(n=zero+n,clockTime.innerHTML=[e,n].join(":")):clockTime.innerHTML=[e,n].join(":")}function resetClock(e){seconds=60,sessionsCountBreak=0,sessionsCountWork=4,clockSession.innerHTML="Work",e<10?(e=zero+e,clockTime.innerHTML=[e,"00"].join(":")):clockTime.innerHTML=[e,"00"].join(":")}function runClock(){sessionsCountBreak>3?(clearInterval(countTime),resetClock(0),displaySessionsCount.innerHTML="Session 4"):(countdown(),displaySessionsCount.innerHTML="Session "+sessionsCountWork)}function countdown(){if(0==minutes&&0==seconds)if(4==sessionsCountWork){minutes=parseInt(workMinutes.textContent),clockSession.innerHTML="Work";var e="Take a longer break now then restart Pomodoro!";showMessage(clockMessage,e),clearInterval(countTime),resetClock(0)}else"Work"==clockSession.textContent?(sessionsCountBreak++,breakSession=parseInt(breakMinutes.textContent),minutes=breakSession,displayRunningTime(breakSession,minutes,seconds),clockSession.innerHTML="Break",notification=new Audio("sounds/elevator.mp3"),notification.play()):"Break"==clockSession.textContent&&(sessionsCountWork++,workSession=parseInt(workMinutes.textContent),minutes=workSession,displayRunningTime(workSession,minutes,seconds),clockSession.innerHTML="Work",notification=new Audio("sounds/short.mp3"),notification.play());else seconds>0?(seconds--,displayTime(minutes,seconds),minutes>0&&(minutes=workSession,minutes--,displayTime(minutes,seconds))):(workSession=minutes,seconds=60,seconds--,minutes--,displayTime(minutes,seconds))}function showMessage(e,n){e.innerHTML=n,e.style.visibility="visible",e.style.opacity=1}function hideMessage(e){e.style.visibility="hidden",e.style.opacity=0}var workMinutes=document.querySelector(".settings__time-work .settings__time-digits"),breakMinutes=document.querySelector(".settings__time-break .settings__time-digits"),buttons=document.querySelectorAll(".settings__time-button"),clockTime=document.querySelector(".clock-time"),infoIcon=document.querySelector(".app-info__icon"),infoModal=document.querySelector(".app-info__modal"),infoOverly=document.querySelector(".app-info__overly"),infoModalClose=document.querySelector(".app-info__close"),playBtn=document.querySelector(".clock__btn__play"),pauseBtn=document.querySelector(".clock__btn__pause"),resetBtn=document.querySelector(".clock__btn__reset"),clockSession=document.querySelector(".clock-session"),settingsMessage=document.querySelector(".settings__message"),clockMessage=document.querySelector(".clock-message"),displaySessionsCount=document.querySelector(".clock-session__count"),countTime,notification,sessionsCountWork=1,sessionsCountBreak=0,workSession=25,breakSession=5,zero="0",seconds=60,minutes=workSession;setTime(),playBtn.addEventListener("click",function(){workSession=parseInt(workMinutes.textContent),sessionsCountWork=1,clearInterval(countTime),countTime=setInterval(runClock,1e3),hideMessage(clockMessage)}),pauseBtn.addEventListener("click",function(){clearInterval(countTime)}),resetBtn.addEventListener("click",function(){clearInterval(countTime),seconds=60,workSession=25,workMinutes.textContent="25m",breakMinutes.textContent="5m",displaySessionsCount.innerHTML="Session 1",displayTime(workSession,0),hideMessage(clockMessage)}),infoIcon.addEventListener("click",function(){infoModal.classList.add("app-info--show"),infoOverly.classList.add("app-info--show")}),infoModalClose.addEventListener("click",function(){infoModal.classList.remove("app-info--show"),infoOverly.classList.remove("app-info--show")});
